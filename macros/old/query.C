/*****************************************************
 *                                                   *
 *                                                   *
 *                                                   *
 *****************************************************/
{

  // DataBase
  TSQLServer *dbh = TSQLServer::Connect("mysql://phys-bonanza/acqu", "write", "writeonly");

  // mysql
  TSQLResult *res;
  TSQLRow    *row;
  Char_t     szQuery[1000];

  Char_t     szStart[]="2008-08-17";
  Char_t     szStopp[]="2008-08-17";

  sprintf( szQuery, 
	   "INSERT INTO Nb_sets_main(start_run, start_time, stop_run, stop_time) "
	   "VALUES ("
	   "(SELECT run FROM Nb_run_main WHERE date LIKE '%s%%' ORDER BY run LIMIT 1), "
	   "(SELECT date FROM Nb_run_main WHERE date LIKE '%s%%' ORDER BY run LIMIT 1), "
	   "(SELECT run FROM Nb_run_main WHERE date LIKE '%s%%' ORDER BY run DESC LIMIT 1), "
	   "(SELECT date FROM Nb_run_main WHERE date LIKE '%s%%' ORDER BY run DESC LIMIT 1))",
	   szStart, szStart, szStopp, szStopp );
	
  cout << szQuery << endl;
  //res = dbh->Query(szQuery);
  
  dbh->Close();
}

/*
+------+-----------+----------+---------------------+---------------------+---------+---------------------+
| sets | start_run | stop_run | start_time          | stop_time           | comment | filled              |
+------+-----------+----------+---------------------+---------------------+---------+---------------------+
|    1 |     14441 |    14472 | 2008-04-22 18:52:06 | 2008-04-23 23:40:46 | NULL    | 2009-06-05 09:40:40 |
|    2 |     14473 |    14508 | 2008-04-24 00:18:10 | 2008-04-24 23:54:36 | NULL    | 2009-06-05 09:41:22 |
|    3 |     14509 |    14553 | 2008-04-25 00:45:59 | 2008-04-25 23:29:53 | NULL    | 2009-06-05 09:41:35 |
|    4 |     14554 |    14601 | 2008-04-26 00:01:37 | 2008-04-26 23:32:05 | NULL    | 2009-06-05 09:42:23 |
|    5 |     14602 |    14647 | 2008-04-27 00:04:17 | 2008-04-27 23:46:16 | NULL    | 2009-06-05 09:42:58 |
|    6 |     14648 |    14693 | 2008-04-28 00:18:16 | 2008-04-29 23:56:29 | NULL    | 2009-06-05 09:43:48 |
|    7 |     14694 |    14750 | 2008-04-30 01:20:08 | 2008-04-30 23:55:30 | NULL    | 2009-06-05 09:46:09 |
|    8 |     14751 |    14814 | 2008-05-01 00:16:56 | 2008-05-01 22:37:36 | NULL    | 2009-06-05 09:46:45 |
|    9 |     14823 |    14888 | 2008-05-02 00:41:09 | 2008-05-02 23:40:24 | NULL    | 2009-06-05 09:47:12 |
|   10 |     14889 |    14936 | 2008-05-03 00:00:57 | 2008-05-03 23:50:50 | NULL    | 2009-06-05 09:47:27 |
|   11 |     14937 |    15002 | 2008-05-04 00:11:42 | 2008-05-04 23:42:56 | NULL    | 2009-06-05 09:47:38 |
|   12 |     15003 |    15069 | 2008-05-05 00:03:59 | 2008-05-05 23:54:05 | NULL    | 2009-06-05 09:47:46 |
|   13 |     15070 |    15124 | 2008-05-06 00:15:01 | 2008-05-06 23:43:53 | NULL    | 2009-06-05 09:47:53 |
|   14 |     15125 |    15188 | 2008-05-07 00:05:33 | 2008-05-07 23:46:20 | NULL    | 2009-06-05 09:48:00 |
|   15 |     15189 |    15246 | 2008-05-08 00:07:05 | 2008-05-08 23:42:47 | NULL    | 2009-06-05 09:48:07 |
|   16 |     15247 |    15306 | 2008-05-09 00:05:45 | 2008-05-09 23:52:57 | NULL    | 2009-06-05 09:48:18 |
|   17 |     15307 |    15369 | 2008-05-10 00:19:38 | 2008-05-10 23:55:25 | NULL    | 2009-06-05 09:48:27 |
|   18 |     15370 |    15439 | 2008-05-11 00:18:25 | 2008-05-11 23:41:07 | NULL    | 2009-06-05 09:49:30 |
|   19 |     15440 |    15506 | 2008-05-12 00:01:54 | 2008-05-12 23:46:31 | NULL    | 2009-06-05 09:49:37 |
|   20 |     15507 |    15537 | 2008-05-13 00:07:15 | 2008-05-13 09:33:57 | NULL    | 2009-06-05 09:49:44 |
|   21 |     17030 |    17083 | 2008-08-05 23:11:32 | 2008-08-06 23:44:40 | NULL    | 2009-06-05 09:50:25 |
|   22 |     17084 |    17140 | 2008-08-07 00:08:53 | 2008-08-07 23:29:57 | NULL    | 2009-06-05 09:50:59 |
|   23 |     17141 |    17197 | 2008-08-08 03:01:16 | 2008-08-08 23:56:20 | NULL    | 2009-06-05 09:51:06 |
|   24 |     17198 |    17255 | 2008-08-09 00:45:52 | 2008-08-09 23:59:14 | NULL    | 2009-06-05 09:51:20 |
|   25 |     17256 |    17315 | 2008-08-10 00:03:14 | 2008-08-10 23:48:53 | NULL    | 2009-06-05 09:51:27 |
|   26 |     17316 |    17330 | 2008-08-11 00:12:19 | 2008-08-11 05:27:34 | NULL    | 2009-06-05 09:51:32 |
|   27 |     17331 |    17361 | 2008-08-12 10:58:23 | 2008-08-12 23:57:21 | NULL    | 2009-06-05 09:51:37 |
|   28 |     17362 |    17413 | 2008-08-13 00:19:28 | 2008-08-13 23:58:51 | NULL    | 2009-06-05 09:51:47 |
|   29 |     17414 |    17469 | 2008-08-14 00:22:29 | 2008-08-14 23:50:10 | NULL    | 2009-06-05 09:52:13 |
|   30 |     17470 |    17522 | 2008-08-15 00:14:11 | 2008-08-15 23:50:05 | NULL    | 2009-06-05 09:52:19 |
|   31 |     17523 |    17577 | 2008-08-16 00:14:14 | 2008-08-16 23:55:05 | NULL    | 2009-06-05 09:52:24 |
|   32 |     17578 |    17599 | 2008-08-17 00:18:18 | 2008-08-17 08:34:43 | NULL    | 2009-06-05 09:53:18 |
+------+-----------+----------+---------------------+---------------------+---------+---------------------+
32 rows in set (0.00 sec)
*/
